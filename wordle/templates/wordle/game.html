<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>日本語ワードル</title>
  <style>
    .tile { display:inline-block; width:40px; height:40px; text-align:center; line-height:40px; font-size:20px; margin:2px; border:1px solid #ccc; }
    .green { background-color:#aaffaa; }
    .yellow { background-color:#ffff99; }
    .gray { background-color:#cccccc; }
  </style>
</head>
<body>
  <h1>日本語ワードル</h1>
  <div>
    <button><a href="?len=5">5글자</a></button>
    <button><a href="?len=6">6글자</a></button>
  </div>

  <p>残り <strong>{{ remaining }}</strong> 回 ({{ len }} 文字)</p>

  {% if error %}
    <p style="color:red">{{ error }}</p>
  {% endif %}

  {% if remaining > 0 %}
    <form method="POST">
      {% csrf_token %}
      <!-- maxlength를 동적으로 len 변수로 설정 -->
      <input type="text" name="guess" maxlength="{{ len }}" required autofocus>
      <button type="submit">送信</button>
    </form>
  {% else %}
    <p>試行回数を使い切りました。正解は「{{ request.session.answer }}」です。</p>
  {% endif %}

  <h2>これまでの結果</h2>
  {% for attempt in attempts %}
    <div>
      {% for ch, color in attempt %}
        <div class="tile {{ color }}">{{ ch }}</div>
      {% endfor %}
    </div>
  {% endfor %}
</body>
</html>
